üöÄ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
POST /register

–û–ø–∏—Å–∞–Ω–∏–µ: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

{
  "login": "user",
  "password": "pass",
  "role": "USER" | "ADMIN"
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.

    400 ‚Äî –æ—à–∏–±–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

    500 ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

POST /login

–û–ø–∏—Å–∞–Ω–∏–µ: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

{
  "login": "user",
  "password": "pass"
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî —É—Å–ø–µ—à–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–µ–Ω —Ç–æ–∫–µ–Ω.

    {
      "token": "<JWT>"
    }

    401 ‚Äî –æ—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

    500 ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

üîê OTP (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏)
POST /otp/generate

–û–ø–∏—Å–∞–Ω–∏–µ: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OTP –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ó–∞–≥–æ–ª–æ–≤–∫–∏:

    Authorization: <token> ‚Äî JWT —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

{
  "channel": "email" | "sms" | "telegram" | "file",
  "destination": "example@example.com"
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî OTP —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω.

    403 ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω).

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

POST /otp/generate
Authorization: {token}

{
  "channel": "sms",
  "destination": "+79236976269"
}

–î–ª—è –¥—Ä—É–≥–∏—Ö –∫–∞–Ω–∞–ª–æ–≤:

    channel: "email" ‚Äî destination: "your@email.com"

    channel: "telegram" ‚Äî destination: "-123456789" (chat_id)

    channel: "sms" ‚Äî destination "+79236976269"

    channel: "file" ‚Äî destination –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å.

POST /otp/validate

–û–ø–∏—Å–∞–Ω–∏–µ: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è (OTP).

–ó–∞–≥–æ–ª–æ–≤–∫–∏:

    Authorization: <token> ‚Äî JWT —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

{
  "code": "123456"
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî OTP –≤–µ—Ä–µ–Ω.

    400 ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥.

    403 ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞.

    500 ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

üõ† –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
POST /admin/config

–û–ø–∏—Å–∞–Ω–∏–µ: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ OTP (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∏ –¥–ª–∏–Ω–∞ –∫–æ–¥–∞).

–ó–∞–≥–æ–ª–æ–≤–∫–∏:

    Authorization: <admin-token> ‚Äî —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

{
  "ttl_seconds": 120,
  "length": 6
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞.

    403 ‚Äî –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω.

    500 ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

GET /admin/users

–û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫—Ä–æ–º–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤).

–ó–∞–≥–æ–ª–æ–≤–∫–∏:

    Authorization: <admin-token> ‚Äî —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–û—Ç–≤–µ—Ç:

{
  "users": ["user1", "user2"]
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

    403 ‚Äî –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω.

    500 ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

DELETE /admin/user

–û–ø–∏—Å–∞–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ó–∞–≥–æ–ª–æ–≤–∫–∏:

    Authorization: <admin-token> ‚Äî —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

{
  "login": "user"
}

–û—Ç–≤–µ—Ç—ã:

    200 OK ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω.

    400 ‚Äî –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω).

    403 ‚Äî –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω.

    500 ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

üîë –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ /otp/generate

POST /otp/generate
Authorization: {token}

{
  "method": "sms",
  "destination": "+79236976269"
}

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã:

    method: "email" + destination: "your@email.com"

    method: "telegram" + destination: "-123456789" (chat_id)

    method: "file" ‚Äî destination –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å.
